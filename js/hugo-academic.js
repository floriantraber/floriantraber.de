!function(t){let e=t(".navbar-header").innerHeight();function o(o){o=(o=void 0===o||"object"==typeof o?window.location.hash:o).replace(/:/g,"\\:"),t(o).length&&(t("body").addClass("scrolling"),t("html, body").animate({scrollTop:t(o).offset().top-e},600,function(){t("body").removeClass("scrolling")}))}function a(){let o=t("body"),a=o.data("bs.scrollspy");a&&(a.options.offset=e,o.data("bs.scrollspy",a),o.scrollspy("refresh"))}window.addEventListener("hashchange",o),t("#navbar-main li.nav-item a").on("click",function(o){let a=this.hash;a&&t(a).length&&t("#homepage").length>0&&(o.preventDefault(),t("html, body").animate({scrollTop:t(a).offset().top-e},800))}),t("#back_to_top").on("click",function(e){e.preventDefault(),t("html, body").animate({scrollTop:0},800,function(){window.location.hash=""})}),t(document).on("click",".navbar-collapse.in",function(e){let o=t(e.target).is("a")?t(e.target):t(e.target).parent();o.is("a")&&"dropdown-toggle"!=o.attr("class")&&t(this).collapse("hide")});let n=t("#container-publications");n.isotope({itemSelector:".isotope-item",percentPosition:!0,masonry:{columnWidth:".grid-sizer"}});let i={};function l(t){let e="";for(let o in t)e+=t[o];return e}t(".pub-filters").on("change",function(){let e=t(this)[0].getAttribute("data-filter-group");i[e]=this.value;let o=l(i);if(n.isotope({filter:o}),"pubtype"==e){let e=t(this).val();".pubtype-"==e.substr(0,9)?window.location.hash=e.substr(9):window.location.hash=""}}),t(window).on("load",function(){let s;window.location.hash&&("#top"==window.location.hash?window.location.hash="":o()),t("body").scrollspy({offset:e}),t(window).resize(function(){clearTimeout(s),s=setTimeout(a,200)}),t(".projects-container").each(function(e,o){let a=t(o),n=a.closest("section"),i="masonry";n.find(".isotope").hasClass("js-layout-row")&&(i="fitRows"),a.imagesLoaded(function(){a.isotope({itemSelector:".isotope-item",layoutMode:i,filter:n.find(".default-project-filter").text()}),n.find(".project-filters a").click(function(){let e=t(this).attr("data-filter");return a.isotope({filter:e}),t(this).removeClass("active").addClass("active").siblings().removeClass("active all"),!1})})}),t(".pub-filters-select")&&function(){let e=window.location.hash.replace("#",""),o="*";""==e||isNaN(e)||(o=".pubtype-"+e),i.pubtype=o;let a=l(i);n.isotope({filter:a}),t(".pubtype-select").val(o)}(),t(".js-cite-modal").click(function(e){e.preventDefault();let o=t(this).attr("data-filename"),a=t("#modal");a.find(".modal-body").load(o,function(e,a,n){if("error"==a){let e="Error: ";t("#modal-error").html(e+n.status+" "+n.statusText)}else t(".js-download-cite").attr("href",o)}),a.modal("show")}),t(".js-copy-cite").click(function(t){t.preventDefault();let e=document.createRange(),o=document.querySelector("#modal .modal-body");e.selectNode(o),window.getSelection().addRange(e);try{document.execCommand("copy")}catch(t){console.log("Error: citation copy failed.")}window.getSelection().removeRange(e)}),function(){if(t("#map").length){let e=t("#map-provider").val(),o=t("#map-lat").val(),a=t("#map-lng").val(),n=parseInt(t("#map-zoom").val()),i=t("#map-dir").val(),l=t("#map-api-key").val();if(1==e)new GMaps({div:"#map",lat:o,lng:a,zoom:n,zoomControl:!0,zoomControlOpt:{style:"SMALL",position:"TOP_LEFT"},panControl:!1,streetViewControl:!1,mapTypeControl:!1,overviewMapControl:!1,scrollwheel:!0,draggable:!0}).addMarker({lat:o,lng:a,click:function(t){let e="https://www.google.com/maps/place/"+encodeURIComponent(i)+"/@"+o+","+a+"/";window.open(e,"_blank")},title:i});else{let t=new L.map("map").setView([o,a],n);3==e&&l.length?L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:l}).addTo(t):L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(t);let s=L.marker([o,a]).addTo(t),r=o+","+a+"#map="+n+"/"+o+"/"+a+"&layers=N";s.bindPopup(i+'<p><a href="https://www.openstreetmap.org/directions?engine=osrm_car&route='+r+'">Routing via OpenStreetMap</a></p>')}}}()})}(jQuery);